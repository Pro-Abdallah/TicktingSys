{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Downloads/ITTickting%20Sys/app/api/auth/login/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://127.0.0.1:5000';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const { email, password } = await request.json();\r\n\r\n        if (!email || !password) {\r\n            return NextResponse.json(\r\n                { success: false, message: 'Email and password are required' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        // Call .NET API backend\r\n        const response = await fetch(`${API_URL}/api/Auth/login`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ email, password })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!response.ok) {\r\n            return NextResponse.json(data, { status: response.status });\r\n        }\r\n\r\n        return NextResponse.json(data);\r\n\r\n    } catch (error: any) {\r\n        console.error('Login error detailed:', {\r\n            message: error.message,\r\n            cause: error.cause,\r\n            stack: error.stack,\r\n            url: `${API_URL}/api/Auth/login`\r\n        });\r\n\r\n        // Check if it's a connection refused error\r\n        if (error.cause?.code === 'ECONNREFUSED') {\r\n            return NextResponse.json(\r\n                { success: false, message: 'Cannot connect to backend server. Is .NET API running on port 5000?', error: error.message },\r\n                { status: 503 }\r\n            );\r\n        }\r\n\r\n        return NextResponse.json(\r\n            { success: false, message: 'Internal server error during login', error: error.message },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAE5C,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE9C,IAAI,CAAC,SAAS,CAAC,UAAU;YACrB,OAAO,gTAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,SAAS;YAAkC,GAC7D;gBAAE,QAAQ;YAAI;QAEtB;QAEA,wBAAwB;QACxB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,eAAe,CAAC,EAAE;YACtD,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QAC3C;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,OAAO,gTAAY,CAAC,IAAI,CAAC,MAAM;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAC7D;QAEA,OAAO,gTAAY,CAAC,IAAI,CAAC;IAE7B,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,yBAAyB;YACnC,SAAS,MAAM,OAAO;YACtB,OAAO,MAAM,KAAK;YAClB,OAAO,MAAM,KAAK;YAClB,KAAK,GAAG,QAAQ,eAAe,CAAC;QACpC;QAEA,2CAA2C;QAC3C,IAAI,MAAM,KAAK,EAAE,SAAS,gBAAgB;YACtC,OAAO,gTAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,SAAS;gBAAuE,OAAO,MAAM,OAAO;YAAC,GACvH;gBAAE,QAAQ;YAAI;QAEtB;QAEA,OAAO,gTAAY,CAAC,IAAI,CACpB;YAAE,SAAS;YAAO,SAAS;YAAsC,OAAO,MAAM,OAAO;QAAC,GACtF;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}